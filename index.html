<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            padding: 20px;
        }

        /* Login Page */
        .login-container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            max-width: 400px;
            margin: 0 auto;
            text-align: center;
        }

        .login-container h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .login-container p {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .error-message {
            color: #e74c3c;
            margin-top: 10px;
            font-size: 14px;
        }

        /* Dashboard */
        .dashboard {
            display: none;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .dashboard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dashboard-header-left h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .user-welcome {
            font-size: 14px;
            opacity: 0.95;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .dashboard-content {
            padding: 30px;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .menu-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            text-align: center;
        }

        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .menu-card h3 {
            font-size: 20px;
            margin-bottom: 10px;
        }

        .menu-card p {
            font-size: 14px;
            opacity: 0.9;
        }

        .submenu {
            display: none;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .submenu.active {
            display: block;
        }

        .submenu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .submenu-btn {
            background: white;
            color: #667eea;
            padding: 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .submenu-btn:hover {
            background: #667eea;
            color: white;
        }

        .form-container {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid #e0e0e0;
        }

        .form-container.active {
            display: block;
        }

        .form-container h2 {
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 5px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }

        .form-group input,
        .form-group select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .form-actions button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .records-list {
            margin-top: 20px;
        }

        .record-item {
            background: white;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .record-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .record-header h3 {
            color: #667eea;
        }

        .record-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        .record-field {
            font-size: 14px;
        }

        .record-field strong {
            color: #555;
        }

        .back-btn {
            background: #95a5a6;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .back-btn:hover {
            background: #7f8c8d;
        }

        .success-message {
            background: #2ecc71;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            text-align: center;
        }

        .about-content {
            line-height: 1.8;
            color: #333;
        }

        .about-content h3 {
            color: #667eea;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .about-content p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .contact-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .contact-info p {
            margin: 5px 0;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login Page -->
        <div class="login-container" id="loginPage">
            <h1>College Management System</h1>
            <p>Welcome! Please login to continue</p>

            <div class="input-group">
                <label for="userType">User Type:</label>
                <select id="userType" required>
                    <option value="">Select User Type</option>
                    <option value="administrative">Administrative</option>
                    <option value="local">Local User</option>
                    <option value="staff">Staff Member</option>
                </select>
            </div>

            <div class="input-group">
                <label for="username">Username/Staff ID:</label>
                <input type="text" id="username" placeholder="Enter username or staff ID">
            </div>

            <div class="input-group">
                <label for="password">Password:</label>
                <input type="password" id="password" placeholder="Enter password">
            </div>
            <button class="btn" onclick="login()">Login</button>
            <div class="error-message" id="errorMessage"></div>
        </div>

        <!-- Dashboard -->
        <div class="dashboard" id="dashboard">
            <div class="dashboard-header">
                <div class="dashboard-header-left">
                    <h1>College Management System</h1>
                    <div class="user-welcome" id="welcomeMsg">Welcome, User</div>
                </div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
            <div class="dashboard-content">
                <div class="menu-grid" id="menuGrid">
                    <div class="menu-card" onclick="showSection('student')" id="studentCard">
                        <h3>Student Records</h3>
                        <p>Manage student information and fees</p>
                    </div>
                    <div class="menu-card" onclick="showSection('staff')" id="staffCard">
                        <h3>Staff Records</h3>
                        <p>Manage staff information and salaries</p>
                    </div>
                    <div class="menu-card" onclick="showSection('about')">
                        <h3>About College</h3>
                        <p>Information about our institution</p>
                    </div>
                    <div class="menu-card" onclick="showSection('mySalary')" id="mySalaryCard" style="display:none;">
                        <h3>My Salary</h3>
                        <p>View your salary details</p>
                    </div>
                </div>

                <!-- Student Submenu -->
                <div class="submenu" id="studentSubmenu">
                    <h2 style="color: #667eea; margin-bottom: 20px;">Student Record Section</h2>
                    <div class="submenu-grid">
                        <button class="submenu-btn" onclick="showForm('addStudent')">Add Student</button>
                        <button class="submenu-btn" onclick="showForm('searchStudent')">Search Student</button>
                        <button class="submenu-btn" onclick="showForm('displayStudents')">Display All</button>
                        <button class="submenu-btn" onclick="showForm('modifyStudent')">Modify Student</button>
                        <button class="submenu-btn" onclick="showForm('deleteStudent')">Delete Student</button>
                        <button class="submenu-btn" onclick="showForm('studentFees')">Collect Fees</button>
                    </div>
                </div>

                <!-- Staff Submenu -->
                <div class="submenu" id="staffSubmenu">
                    <h2 style="color: #667eea; margin-bottom: 20px;">Staff Record Section</h2>
                    <div class="submenu-grid">
                        <button class="submenu-btn" onclick="showForm('addStaff')">Add Staff</button>
                        <button class="submenu-btn" onclick="showForm('searchStaff')">Search Staff</button>
                        <button class="submenu-btn" onclick="showForm('displayStaff')">Display All</button>
                        <button class="submenu-btn" onclick="showForm('modifyStaff')">Modify Staff</button>
                        <button class="submenu-btn" onclick="showForm('deleteStaff')">Delete Staff</button>
                        <button class="submenu-btn" onclick="showForm('staffSalary')">Generate Salary</button>
                    </div>
                </div>

                <!-- About Section -->
                <div class="submenu" id="aboutSubmenu">
                    <h2 style="color: #667eea; margin-bottom: 20px;">About Our College</h2>
                    <div class="about-content">
                        <h3>ABOUT:</h3>
                        <p>Government Autonomous College, Rourkela, Orissa was granted the autonomous rank owing to the upended academic growth and was attributed by NAAC with grade B. The college offers UG courses, PG courses, and diplomas with multiple specializations under every course across three streams Science, Arts, and Commerce. It also provides diversified self-financing courses in Mathematics with Computer(MTC), Computer Science, Electronics and Tele-Communication (ETC), and PGDCA, PGDCH. Admission to these courses is merit-based. Applicants seeking admission to the institute may apply online. Separate rooms for IGNOU Study Centre have also been arranged for the college.</p>

                        <h3>HISTORY:</h3>
                        <p>The College started as Rourkela Science College from 16th August, 1961 and was taken over by Government Odisha on 01-07-1963. With the vertical academic growth, the College was conferred with autonomous status in 2002. In the year 2002 the College was accredited by NACC with Grade-B. The College offers variety of Courses at different levels. Besides Art, Science and Commerce at Higher Secondary and Degree levels the College also offers Master Degree in 17 subjects and M.Phil in 03 subjects i.e. Botany, English and Odia.</p>

                        <div class="contact-info">
                            <h3 style="margin-top: 0;">Contact Information:</h3>
                            <p><strong>Address:</strong> Sundargarh, Raghunathpali, Rourkela, Odisha 769004</p>
                            <p><strong>Help Line:</strong> 0661-3502418</p>
                            <p><strong>Office Email:</strong> principalgacr@gmail.com</p>
                            <p><strong>Examination Email:</strong> coegacr@gmail.com</p>
                            <p><strong>Website:</strong> gacrkl.ac.in</p>
                        </div>
                    </div>
                </div>

                <!-- My Salary Section (Staff Only) -->
                <div class="submenu" id="mySalarySubmenu">
                    <h2 style="color: #667eea; margin-bottom: 20px;">My Salary Details</h2>
                    <div id="mySalaryContent"></div>
                </div>

                <!-- Forms Container -->
                <div id="formsContainer"></div>
            </div>
        </div>
    </div>

    <script>
        // Data storage
        let students = [];
        let staff = [];
        let currentSection = null;
        let currentUser = {
            type: null,
            username: null,
            name: null,
            staffId: null
        };

        // User credentials
        const credentials = {
            administrative: { username: 'admin', password: 'admin123' },
            local: { username: 'local', password: 'local123' },
            staff: { password: 'staff123' }
        };

        // Initialize with demo staff
        staff.push({
            fid: '1001',
            fan: 'Dr. Rajesh Kumar Sharma',
            fq: 'Ph.D. in Physics',
            fd: 'Professor',
            fjd: '2015-07-01',
            fdb: '1985-05-15',
            fbg: 'O+',
            fg: 'Male',
            fc: 'General',
            fcno: '9876543210',
            feid: 'rajesh.sharma@gacrkl.ac.in',
            fbac: '1234567890',
            fbank: 'State Bank of India',
            fifsc: 'SBIN0001234',
            fbranch: 'Rourkela Main',
            nsalary: 0
        });

        staff.push({
            fid: '1002',
            fan: 'Dr. Priya Patel',
            fq: 'M.Sc. in Chemistry',
            fd: 'HOD',
            fjd: '2018-08-15',
            fdb: '1988-09-20',
            fbg: 'A+',
            fg: 'Female',
            fc: 'OBC',
            fcno: '9123456789',
            feid: 'priya.patel@gacrkl.ac.in',
            fbac: '9876543210',
            fbank: 'HDFC Bank',
            fifsc: 'HDFC0001234',
            fbranch: 'Rourkela',
            nsalary: 0
        });

        // Education level structure
        const educationStructure = {
            'Intermediate': {
                classes: ['+1 (11th)', '+2 (12th)'],
                streams: ['Science', 'Arts', 'Commerce'],
                hasDepartment: false
            },
            'Graduation': {
                classes: ['1st Year', '2nd Year', '3rd Year'],
                streams: ['Science', 'Arts', 'Commerce'],
                hasDepartment: true,
                departments: {
                    'Science': ['Physics', 'Chemistry', 'Mathematics', 'Computer Science', 'Botany', 'Zoology'],
                    'Arts': ['English', 'Odia', 'History', 'Political Science', 'Economics', 'Sociology', 'Psychology', 'Geography', 'Philosophy', 'Sanskrit', 'Hindi'],
                    'Commerce': ['Accountancy', 'Business Studies', 'Economics']
                }
            },
            'Post Graduate': {
                classes: ['1st Year', '2nd Year'],
                streams: ['Botany', 'English', 'Odia', 'Physics', 'Chemistry', 'Mathematics', 'Computer Science', 'Commerce', 'History', 'Political Science', 'Economics', 'Sociology', 'Psychology', 'Geography', 'Philosophy', 'Sanskrit', 'Hindi'],
                hasDepartment: true,
                departments: {
                    'Botany': ['Botany'],
                    'English': ['English'],
                    'Odia': ['Odia'],
                    'Physics': ['Physics'],
                    'Chemistry': ['Chemistry'],
                    'Mathematics': ['Mathematics'],
                    'Computer Science': ['Computer Science'],
                    'Commerce': ['Commerce'],
                    'History': ['History'],
                    'Political Science': ['Political Science'],
                    'Economics': ['Economics'],
                    'Sociology': ['Sociology'],
                    'Psychology': ['Psychology'],
                    'Geography': ['Geography'],
                    'Philosophy': ['Philosophy'],
                    'Sanskrit': ['Sanskrit'],
                    'Hindi': ['Hindi']
                }
            }
        };

        // Bank data with IFSC codes
        const bankData = {
            'State Bank of India': 'SBIN0001234',
            'HDFC Bank': 'HDFC0001234',
            'ICICI Bank': 'ICIC0001234',
            'Punjab National Bank': 'PUNB0123456',
            'Bank of Baroda': 'BARB0123456',
            'Canara Bank': 'CNRB0001234',
            'Union Bank of India': 'UBIN0123456',
            'Bank of India': 'BKID0001234',
            'Indian Bank': 'IDIB0001234',
            'Central Bank of India': 'CBIN0123456',
            'UCO Bank': 'UCBA0001234',
            'Axis Bank': 'UTIB0001234',
            'Kotak Mahindra Bank': 'KKBK0001234',
            'IndusInd Bank': 'INDB0001234',
            'Yes Bank': 'YESB0001234'
        };

        // ===========================
        // CORE NAVIGATION FUNCTIONS
        // ===========================

        function login() {
            const userType = document.getElementById('userType').value;
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            const errorMessage = document.getElementById('errorMessage');

            if (!userType) {
                errorMessage.textContent = 'Please select user type!';
                return;
            }

            if (!username || !password) {
                errorMessage.textContent = 'Please enter both username and password!';
                return;
            }

            let isValid = false;

            if (userType === 'administrative') {
                if (username === credentials.administrative.username && password === credentials.administrative.password) {
                    currentUser.type = 'administrative';
                    currentUser.username = username;
                    currentUser.name = 'Administrator';
                    isValid = true;
                }
            } else if (userType === 'local') {
                if (username === credentials.local.username && password === credentials.local.password) {
                    currentUser.type = 'local';
                    currentUser.username = username;
                    currentUser.name = 'Local User';
                    isValid = true;
                }
            } else if (userType === 'staff') {
                const staffMember = staff.find(s => s.fid == username);
                if (staffMember && password === credentials.staff.password) {
                    currentUser.type = 'staff';
                    currentUser.staffId = username;
                    currentUser.name = staffMember.fan;
                    isValid = true;
                } else if (!staffMember) {
                    errorMessage.textContent = 'Staff ID not found!';
                    return;
                }
            }

            if (isValid) {
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                errorMessage.textContent = '';
                setupDashboard();
            } else {
                errorMessage.textContent = 'Invalid credentials!';
            }
        }

        function setupDashboard() {
            document.getElementById('welcomeMsg').textContent = `Welcome, ${currentUser.name}!`;

            const studentCard = document.getElementById('studentCard');
            const staffCard = document.getElementById('staffCard');
            const mySalaryCard = document.getElementById('mySalaryCard');

            if (currentUser.type === 'administrative') {
                studentCard.style.display = 'block';
                staffCard.style.display = 'block';
                mySalaryCard.style.display = 'none';
            } else if (currentUser.type === 'local') {
                studentCard.style.display = 'block';
                staffCard.style.display = 'none';
                mySalaryCard.style.display = 'none';
            } else if (currentUser.type === 'staff') {
                studentCard.style.display = 'none';
                staffCard.style.display = 'none';
                mySalaryCard.style.display = 'block';
            }
        }

        function logout() {
            document.getElementById('loginPage').style.display = 'block';
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('userType').value = '';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            currentUser = { type: null, username: null, name: null, staffId: null };
            hideAllSections();
        }

        function showSection(section) {
            hideAllSections();
            currentSection = section;
            
            if (section === 'mySalary') {
                document.getElementById('mySalarySubmenu').classList.add('active');
                displayMySalary();
            } else {
                document.getElementById(section + 'Submenu').classList.add('active');
            }
        }

        function hideAllSections() {
            document.querySelectorAll('.submenu').forEach(submenu => {
                submenu.classList.remove('active');
            });
            document.getElementById('formsContainer').innerHTML = '';
        }

        function showForm(formType) {
            const container = document.getElementById('formsContainer');
            
            switch(formType) {
                case 'addStudent':
                    container.innerHTML = getAddStudentForm();
                    break;
                case 'searchStudent':
                    container.innerHTML = getSearchStudentForm();
                    break;
                case 'displayStudents':
                    displayAllStudents();
                    break;
                case 'modifyStudent':
                    container.innerHTML = getModifyStudentForm();
                    break;
                case 'deleteStudent':
                    container.innerHTML = getDeleteStudentForm();
                    break;
                case 'studentFees':
                    container.innerHTML = getFeesForm();
                    break;
                case 'addStaff':
                    container.innerHTML = getAddStaffForm();
                    break;
                case 'searchStaff':
                    container.innerHTML = getSearchStaffForm();
                    break;
                case 'displayStaff':
                    displayAllStaff();
                    break;
                case 'modifyStaff':
                    container.innerHTML = getModifyStaffForm();
                    break;
                case 'deleteStaff':
                    container.innerHTML = getDeleteStaffForm();
                    break;
                case 'staffSalary':
                    container.innerHTML = getSalaryForm();
                    break;
            }
        }

        // ===========================
        // STUDENT MANAGEMENT FUNCTIONS
        // ===========================

        function updateClassOptions() {
            const level = document.getElementById('educationLevel').value;
            const classSelect = document.getElementById('classSelect');
            const streamSelect = document.getElementById('streamSelect');
            
            classSelect.innerHTML = '<option value="">Select Class</option>';
            streamSelect.innerHTML = '<option value="">Select Stream</option>';
            
            if (level && educationStructure[level]) {
                educationStructure[level].classes.forEach(cls => {
                    const option = document.createElement('option');
                    option.value = cls;
                    option.textContent = cls;
                    classSelect.appendChild(option);
                });
                
                educationStructure[level].streams.forEach(stream => {
                    const option = document.createElement('option');
                    option.value = stream;
                    option.textContent = stream;
                    streamSelect.appendChild(option);
                });
            }
        }

        function getAddStudentForm() {
            return `
                <div class="form-container active">
                    <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                    <h2>Add Student Record</h2>
                    <form onsubmit="addStudent(event)">
                        <h3 style="color: #667eea; margin: 20px 0 10px;">Personal Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Roll No:</label>
                                <input type="number" name="rno" required>
                            </div>
                            <div class="form-group">
                                <label>Admission Date:</label>
                                <input type="date" name="adt" required>
                            </div>
                            <div class="form-group">
                                <label>Education Level:</label>
                                <select id="educationLevel" name="level" required onchange="updateClassOptions()">
                                    <option value="">Select Level</option>
                                    <option value="Intermediate">Intermediate (+1/+2)</option>
                                    <option value="Graduation">Graduation (Degree)</option>
                                    <option value="Post Graduate">Post Graduate (Masters)</option>
                                    <option value="BBA">BBA</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Class:</label>
                                <select id="classSelect" name="cls" required>
                                    <option value="">First select education level</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Stream/Subject:</label>
                                <select id="streamSelect" name="stm" required>
                                    <option value="">First select education level</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Student Name:</label>
                                <input type="text" name="sn" required>
                            </div>
                            <div class="form-group">
                                <label>Father's Name:</label>
                                <input type="text" name="fn" required>
                            </div>
                            <div class="form-group">
                                <label>Mother's Name:</label>
                                <input type="text" name="mn" required>
                            </div>
                            <div class="form-group">
                                <label>Date of Birth:</label>
                                <input type="date" name="dob" required>
                            </div>
                            <div class="form-group">
                                <label>Contact No:</label>
                                <input type="tel" name="cno" required>
                            </div>
                            <div class="form-group">
                                <label>Alternate Contact:</label>
                                <input type="tel" name="acno">
                            </div>
                            <div class="form-group">
                                <label>Email:</label>
                                <input type="email" name="eid" required>
                            </div>
                            <div class="form-group">
                                <label>Aadhar No:</label>
                                <input type="text" name="adhr" required>
                            </div>
                            <div class="form-group">
                                <label>Gender:</label>
                                <select name="gen" required>
                                    <option value="">Select</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Caste:</label>
                                <input type="text" name="cast" required>
                            </div>
                            <div class="form-group">
                                <label>Religion:</label>
                                <input type="text" name="rel" required>
                            </div>
                            <div class="form-group">
                                <label>Nationality:</label>
                                <input type="text" name="nat" value="Indian" required>
                            </div>
                            <div class="form-group">
                                <label>Blood Group:</label>
                                <select name="bdg" required>
                                    <option value="">Select</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                </select>
                            </div>
                            <div class="form-group" style="grid-column: 1/-1;">
                                <label>Address:</label>
                                <input type="text" name="ads" required>
                            </div>
                        </div>

                        <h3 style="color: #667eea; margin: 20px 0 10px;">Academic Background</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>High School Name:</label>
                                <input type="text" name="hsn" required>
                            </div>
                            <div class="form-group">
                                <label>School Address:</label>
                                <input type="text" name="hsa" required>
                            </div>
                            <div class="form-group">
                                <label>Examination Board:</label>
                                <input type="text" name="exmb" required>
                            </div>
                            <div class="form-group">
                                <label>Matric Marks:</label>
                                <input type="text" name="mm" required>
                            </div>
                            <div class="form-group">
                                <label>Matric Percentage:</label>
                                <input type="text" name="mp" required>
                            </div>
                            <div class="form-group">
                                <label>Passing Year:</label>
                                <input type="text" name="py" required>
                            </div>
                        </div>

                        <h3 style="color: #667eea; margin: 20px 0 10px;">Bank Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Account No:</label>
                                <input type="text" name="acn" required>
                            </div>
                            <div class="form-group">
                                <label>Bank Name:</label>
                                <input type="text" name="ban" required>
                            </div>
                            <div class="form-group">
                                <label>Branch Name:</label>
                                <input type="text" name="brn" required>
                            </div>
                            <div class="form-group">
                                <label>IFSC Code:</label>
                                <input type="text" name="ifsc" required>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn-primary">Add Student</button>
                            <button type="button" class="btn-secondary" onclick="document.getElementById('formsContainer').innerHTML = ''">Cancel</button>
                        </div>
                    </form>
                </div>
            `;
        }

        function addStudent(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const student = Object.fromEntries(formData);
            student.nfees = 0;
            students.push(student);
            
            document.getElementById('formsContainer').innerHTML = `
                <div class="success-message">Student Record Added Successfully!</div>
            `;
            setTimeout(() => {
                document.getElementById('formsContainer').innerHTML = '';
            }, 2000);
        }

        function getSearchStudentForm() {
            return `
                <div class="form-container active">
                    <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                    <h2>Search Student Record</h2>
                    <div class="form-group" style="max-width: 400px;">
                        <label>Enter Roll No:</label>
                        <input type="number" id="searchRno" onchange="searchStudent()">
                    </div>
                    <div id="searchResult"></div>
                </div>
            `;
        }

        function searchStudent() {
            const rno = document.getElementById('searchRno').value;
            const student = students.find(s => s.rno == rno);
            const resultDiv = document.getElementById('searchResult');
            
            if (student) {
                resultDiv.innerHTML = `
                    <div class="record-item">
                        <div class="record-header">
                            <h3>Student: ${student.sn}</h3>
                        </div>
                        <div class="record-details">
                            <div class="record-field"><strong>Roll No:</strong> ${student.rno}</div>
                            <div class="record-field"><strong>Education Level:</strong> ${student.level}</div>
                            <div class="record-field"><strong>Class:</strong> ${student.cls}</div>
                            <div class="record-field"><strong>Stream:</strong> ${student.stm}</div>
                            <div class="record-field"><strong>Father:</strong> ${student.fn}</div>
                            <div class="record-field"><strong>Mother:</strong> ${student.mn}</div>
                            <div class="record-field"><strong>DOB:</strong> ${student.dob}</div>
                            <div class="record-field"><strong>Contact:</strong> ${student.cno}</div>
                            <div class="record-field"><strong>Email:</strong> ${student.eid}</div>
                            <div class="record-field"><strong>Gender:</strong> ${student.gen}</div>
                            <div class="record-field"><strong>Blood Group:</strong> ${student.bdg}</div>
                            ${student.nfees ? `<div class="record-field"><strong>Total Fees:</strong> ₹${student.nfees}</div>` : ''}
                        </div>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = '<p style="color: #e74c3c; margin-top: 20px;">Student not found!</p>';
            }
        }

        function displayAllStudents() {
            const container = document.getElementById('formsContainer');
            if (students.length === 0) {
                container.innerHTML = `
                    <div class="form-container active">
                        <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                        <h2>All Student Records</h2>
                        <p>No students found.</p>
                    </div>
                `;
                return;
            }

            let html = `
                <div class="form-container active">
                    <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                    <h2>All Student Records</h2>
                    <div class="records-list">
            `;

            students.forEach(student => {
                html += `
                    <div class="record-item">
                        <div class="record-header">
                            <h3>${student.sn} (Roll: ${student.rno})</h3>
                        </div>
                        <div class="record-details">
                            <div class="record-field"><strong>Level:</strong> ${student.level}</div>
                            <div class="record-field"><strong>Class:</strong> ${student.cls}</div>
                            <div class="record-field"><strong>Stream:</strong> ${student.stm}</div>
                            <div class="record-field"><strong>Contact:</strong> ${student.cno}</div>
                            <div class="record-field"><strong>Email:</strong> ${student.eid}</div>
                            ${student.nfees ? `<div class="record-field"><strong>Fees:</strong> ₹${student.nfees}</div>` : ''}
                        </div>
                    </div>
                `;
            });

            html += '</div></div>';
            container.innerHTML = html;
        }

        function getModifyStudentForm() {
            return `
                <div class="form-container active">
                    <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                    <h2>Modify Student Record</h2>
                    <div class="form-group" style="max-width: 400px;">
                        <label>Enter Roll No:</label>
                        <input type="number" id="modifyRno" onchange="loadStudentForModify()">
                    </div>
                    <div id="modifyForm"></div>
                </div>
            `;
        }

        function loadStudentForModify() {
            const rno = document.getElementById('modifyRno').value;
            const studentIndex = students.findIndex(s => s.rno == rno);
            
            if (studentIndex !== -1) {
                const student = students[studentIndex];
                document.getElementById('modifyForm').innerHTML = `
                    <form onsubmit="updateStudent(event, ${studentIndex})" style="margin-top: 20px;">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Student Name:</label>
                                <input type="text" name="sn" value="${student.sn}" required>
                            </div>
                            <div class="form-group">
                                <label>Class:</label>
                                <input type="text" name="cls" value="${student.cls}" required>
                            </div>
                            <div class="form-group">
                                <label>Contact No:</label>
                                <input type="tel" name="cno" value="${student.cno}" required>
                            </div>
                            <div class="form-group">
                                <label>Email:</label>
                                <input type="email" name="eid" value="${student.eid}" required>
                            </div>
                            <div class="form-group">
                                <label>Address:</label>
                                <input type="text" name="ads" value="${student.ads}" required>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">Update</button>
                        </div>
                    </form>
                `;
            } else {
                document.getElementById('modifyForm').innerHTML = '<p style="color: #e74c3c;">Student not found!</p>';
            }
        }

        function updateStudent(event, index) {
            event.preventDefault();
            const formData = new FormData(event.target);
            Object.entries(Object.fromEntries(formData)).forEach(([key, value]) => {
                students[index][key] = value;
            });
            
            document.getElementById('formsContainer').innerHTML = `
                <div class="success-message">Student Record Updated Successfully!</div>
            `;
            setTimeout(() => {
                document.getElementById('formsContainer').innerHTML = '';
            }, 2000);
        }

        function getDeleteStudentForm() {
            return `
                <div class="form-container active">
                    <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                    <h2>Delete Student Record</h2>
                    <div class="form-group" style="max-width: 400px;">
                        <label>Enter Roll No:</label>
                        <input type="number" id="deleteRno">
                    </div>
                    <button class="btn-primary" onclick="deleteStudent()" style="margin-top: 20px;">Delete Student</button>
                    <div id="deleteResult"></div>
                </div>
            `;
        }

        function deleteStudent() {
            const rno = document.getElementById('deleteRno').value;
            const index = students.findIndex(s => s.rno == rno);
            
            if (index !== -1) {
                students.splice(index, 1);
                document.getElementById('deleteResult').innerHTML = '<div class="success-message" style="margin-top: 20px;">Student Deleted Successfully!</div>';
            } else {
                document.getElementById('deleteResult').innerHTML = '<p style="color: #e74c3c; margin-top: 20px;">Student not found!</p>';
            }
        }

        function getFeesForm() {
            return `
                <div class="form-container active">
                    <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                    <h2>Student Fees Collection</h2>
                    <div class="form-group" style="max-width: 400px;">
                        <label>Enter Roll No:</label>
                        <input type="number" id="feesRno" onchange="loadFeesCalculation()">
                    </div>
                    <div id="feesCalculation"></div>
                </div>
            `;
        }

        function loadFeesCalculation() {
            const rno = document.getElementById('feesRno').value;
            const studentIndex = students.findIndex(s => s.rno == rno);
            
            if (studentIndex !== -1) {
                const student = students[studentIndex];
                const level = student.level;
                const stream = student.stm;
                
                let baseFeesOptions = {};
                
                if (level === 'Intermediate') {
                    baseFeesOptions = {
                        'Science': { admission: 8000, exam: 980, sport: 800, lab: 500 },
                        'Arts': { admission: 7000, exam: 700, sport: 800, lab: 300 },
                        'Commerce': { admission: 7500, exam: 800, sport: 800, lab: 300 }
                    };
                } else if (level === 'Graduation') {
                    baseFeesOptions = {
                        'Science': { admission: 9000, exam: 980, sport: 800, lab: 500 },
                        'Arts': { admission: 8000, exam: 700, sport: 800, lab: 300 },
                        'Commerce': { admission: 8500, exam: 800, sport: 800, lab: 300 }
                    };
                } else if (level === 'BBA') {
                    baseFeesOptions = {
                        'BBA': { admission: 9000, exam: 880, sport: 800, lab: 200 }
                    };
                } else if (level === 'Post Graduate') {
                    baseFeesOptions = {
                        'default': { admission: 8000, exam: 980, sport: 800, lab: 500 }
                    };
                }

                const fees = baseFeesOptions[stream] || baseFeesOptions['default'] || baseFeesOptions['Science'];

                document.getElementById('feesCalculation').innerHTML = `
                    <div style="margin-top: 20px; background: #f8f9fa; padding: 20px; border-radius: 10px;">
                        <h3 style="color: #667eea;">Student: ${student.sn}</h3>
                        <p><strong>Roll No:</strong> ${student.rno}</p>
                        <p><strong>Level:</strong> ${student.level}</p>
                        <p><strong>Class:</strong> ${student.cls}</p>
                        <p><strong>Stream:</strong> ${student.stm}</p>
                        
                        <div style="margin: 20px 0;">
                            <p><strong>Admission Fees:</strong> ₹${fees.admission}</p>
                            <p><strong>Exam Fees:</strong> ₹${fees.exam}</p>
                            <p><strong>Sport & Cultural Fees:</strong> ₹${fees.sport}</p>
                            <p><strong>Laboratory Fees:</strong> ₹${fees.lab}</p>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="hostelCheck" onchange="calculateTotalFees(${studentIndex}, ${JSON.stringify(fees).replace(/"/g, '&quot;')})">
                                Hostel (₹25,000)
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="busCheck" onchange="calculateTotalFees(${studentIndex}, ${JSON.stringify(fees).replace(/"/g, '&quot;')})">
                                Bus (₹3,000)
                            </label>
                        </div>

                        <div id="totalFees" style="margin-top: 20px; padding: 15px; background: white; border-radius: 5px;">
                            <h3 style="color: #2ecc71;">Total Fees: ₹${fees.admission + fees.exam + fees.sport + fees.lab}</h3>
                        </div>

                        <button class="btn-primary" onclick="saveFees(${studentIndex})" style="margin-top: 20px;">Save Fees</button>
                    </div>
                `;
                calculateTotalFees(studentIndex, fees);
            } else {
                document.getElementById('feesCalculation').innerHTML = '<p style="color: #e74c3c; margin-top: 20px;">Student not found!</p>';
            }
        }

        function calculateTotalFees(index, baseFees) {
            const hostel = document.getElementById('hostelCheck').checked ? 25000 : 0;
            const bus = document.getElementById('busCheck').checked ? 3000 : 0;
            const total = baseFees.admission + baseFees.exam + baseFees.sport + baseFees.lab + hostel + bus;
            
            document.getElementById('totalFees').innerHTML = `
                <h3 style="color: #2ecc71;">Total Fees: ₹${total}</h3>
            `;
            
            students[index].nfees = total;
        }

        function saveFees(index) {
            document.getElementById('formsContainer').innerHTML = `
                <div class="success-message">Fees Saved Successfully! Total: ₹${students[index].nfees}</div>
            `;
            setTimeout(() => {
                document.getElementById('formsContainer').innerHTML = '';
            }, 2000);
        }

        // ========================
        // STAFF MANAGEMENT FUNCTIONS
        // ========================

        function updateIFSC() {
            const bankSelect = document.getElementById('bankSelect');
            const ifscInput = document.getElementById('ifscCode');
            if (bankSelect && ifscInput) {
                ifscInput.value = bankData[bankSelect.value] || '';
            }
        }

        function updateFullName() {
            const firstName = document.getElementById('firstName').value.trim();
            const middleName = document.getElementById('middleName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const fullNameInput = document.getElementById('fullName');
            
            if (fullNameInput) {
                const nameParts = [firstName, middleName, lastName].filter(part => part !== '');
                fullNameInput.value = nameParts.join(' ');
            }
        }

        function getAddStaffForm() {
            return `
                <div class="form-container active">
                    <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                    <h2>Add Staff Record</h2>
                    <form onsubmit="addStaff(event)">
                        <h3 style="color: #667eea; margin: 20px 0 10px;">Personal Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Staff ID:</label>
                                <input type="number" name="fid" required>
                            </div>
                            <div class="form-group">
                                <label>First Name:</label>
                                <input type="text" id="firstName" name="ffn" required onkeyup="updateFullName()">
                            </div>
                            <div class="form-group">
                                <label>Middle Name:</label>
                                <input type="text" id="middleName" name="fmn" onkeyup="updateFullName()">
                            </div>
                            <div class="form-group">
                                <label>Last Name:</label>
                                <input type="text" id="lastName" name="fln" required onkeyup="updateFullName()">
                            </div>
                            <div class="form-group" style="grid-column: 1/-1;">
                                <label>Full Name (Auto-generated):</label>
                                <input type="text" id="fullName" name="fan" readonly style="background: #f0f0f0;">
                            </div>
                            <div class="form-group">
                                <label>Qualification:</label>
                                <input type="text" name="fq" required>
                            </div>
                            <div class="form-group">
                                <label>Designation:</label>
                                <select name="fd" required>
                                    <option value="">Select</option>
                                    <option value="Principal">Principal</option>
                                    <option value="HOD">HOD</option>
                                    <option value="Professor">Professor</option>
                                    <option value="Lab Incharge">Lab Incharge</option>
                                    <option value="Support Staff">Support Staff</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Joining Date:</label>
                                <input type="date" name="fjd" required>
                            </div>
                            <div class="form-group">
                                <label>Date of Birth:</label>
                                <input type="date" name="fdb" required>
                            </div>
                            <div class="form-group">
                                <label>Blood Group:</label>
                                <select name="fbg" required>
                                    <option value="">Select</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Gender:</label>
                                <select name="fg" required>
                                    <option value="">Select</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Caste:</label>
                                <input type="text" name="fc" required>
                            </div>
                            <div class="form-group">
                                <label>Contact No:</label>
                                <input type="tel" name="fcno" required>
                            </div>
                            <div class="form-group">
                                <label>Email:</label>
                                <input type="email" name="feid" required>
                            </div>
                        </div>

                        <h3 style="color: #667eea; margin: 20px 0 10px;">Address Details</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>House No / Street:</label>
                                <input type="text" name="fhno" required placeholder="e.g., 123, Main Street">
                            </div>
                            <div class="form-group">
                                <label>At (Village/Area):</label>
                                <input type="text" name="fat" required placeholder="e.g., Raghunathpali">
                            </div>
                            <div class="form-group">
                                <label>PO (Post Office):</label>
                                <input type="text" name="fpo" required placeholder="e.g., Rourkela">
                            </div>
                            <div class="form-group">
                                <label>PS (Police Station):</label>
                                <input type="text" name="fps" required placeholder="e.g., Sector-19">
                            </div>
                            <div class="form-group">
                                <label>District:</label>
                                <input type="text" name="fdist" required placeholder="e.g., Sundargarh">
                            </div>
                            <div class="form-group">
                                <label>State:</label>
                                <input type="text" name="fstate" required placeholder="e.g., Odisha">
                            </div>
                            <div class="form-group">
                                <label>PIN Code:</label>
                                <input type="text" name="fpin" required pattern="[0-9]{6}" placeholder="e.g., 769004">
                            </div>
                        </div>

                        <h3 style="color: #667eea; margin: 20px 0 10px;">Bank Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Bank Account No:</label>
                                <input type="text" name="fbac" required>
                            </div>
                            <div class="form-group">
                                <label>Select Bank:</label>
                                <select id="bankSelect" name="fbank" required onchange="updateIFSC()">
                                    <option value="">Select Bank</option>
                                    <option value="State Bank of India">State Bank of India</option>
                                    <option value="HDFC Bank">HDFC Bank</option>
                                    <option value="ICICI Bank">ICICI Bank</option>
                                    <option value="Punjab National Bank">Punjab National Bank</option>
                                    <option value="Bank of Baroda">Bank of Baroda</option>
                                    <option value="Canara Bank">Canara Bank</option>
                                    <option value="Union Bank of India">Union Bank of India</option>
                                    <option value="Bank of India">Bank of India</option>
                                    <option value="Indian Bank">Indian Bank</option>
                                    <option value="Central Bank of India">Central Bank of India</option>
                                    <option value="UCO Bank">UCO Bank</option>
                                    <option value="Axis Bank">Axis Bank</option>
                                    <option value="Kotak Mahindra Bank">Kotak Mahindra Bank</option>
                                    <option value="IndusInd Bank">IndusInd Bank</option>
                                    <option value="Yes Bank">Yes Bank</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>IFSC Code (Auto-filled):</label>
                                <input type="text" id="ifscCode" name="fifsc" readonly style="background: #f0f0f0;" required>
                            </div>
                            <div class="form-group">
                                <label>Branch Name:</label>
                                <input type="text" name="fbranch" required>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn-primary">Add Staff</button>
                            <button type="button" class="btn-secondary" onclick="document.getElementById('formsContainer').innerHTML = ''">Cancel</button>
                        </div>
                    </form>
                </div>
            `;
        }

        function addStaff(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const staffMember = Object.fromEntries(formData);
            staffMember.nsalary = 0;
            staff.push(staffMember);
            
            document.getElementById('formsContainer').innerHTML = `
                <div class="success-message">Staff Record Added Successfully!</div>
            `;
            setTimeout(() => {
                document.getElementById('formsContainer').innerHTML = '';
            }, 2000);
        }

        function getSearchStaffForm() {
            return `
                <div class="form-container active">
                    <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                    <h2>Search Staff Record</h2>
                    <div class="form-group" style="max-width: 400px;">
                        <label>Enter Staff ID:</label>
                        <input type="number" id="searchFid" onchange="searchStaff()">
                    </div>
                    <div id="searchStaffResult"></div>
                </div>
            `;
        }

        function searchStaff() {
            const fid = document.getElementById('searchFid').value;
            const staffMember = staff.find(s => s.fid == fid);
            const resultDiv = document.getElementById('searchStaffResult');
            
            if (staffMember) {
                resultDiv.innerHTML = `
                    <div class="record-item">
                        <div class="record-header">
                            <h3>Staff: ${staffMember.fan}</h3>
                        </div>
                        <div class="record-details">
                            <div class="record-field"><strong>Staff ID:</strong> ${staffMember.fid}</div>
                            <div class="record-field"><strong>Designation:</strong> ${staffMember.fd}</div>
                            <div class="record-field"><strong>Qualification:</strong> ${staffMember.fq}</div>
                            <div class="record-field"><strong>Contact:</strong> ${staffMember.fcno}</div>
                            <div class="record-field"><strong>Email:</strong> ${staffMember.feid}</div>
                            ${staffMember.nsalary ? `<div class="record-field"><strong>Net Salary:</strong> ₹${staffMember.nsalary}</div>` : ''}
                        </div>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = '<p style="color: #e74c3c; margin-top: 20px;">Staff not found!</p>';
            }
        }

        function displayAllStaff() {
            const container = document.getElementById('formsContainer');
            if (staff.length === 0) {
                container.innerHTML = `
                    <div class="form-container active">
                        <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                        <h2>All Staff Records</h2>
                        <p>No staff members found.</p>
                    </div>
                `;
                return;
            }

            let html = `
                <div class="form-container active">
                    <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                    <h2>All Staff Records</h2>
                    <div class="records-list">
            `;

            staff.forEach(member => {
                html += `
                    <div class="record-item">
                        <div class="record-header">
                            <h3>${member.fan} (ID: ${member.fid})</h3>
                        </div>
                        <div class="record-details">
                            <div class="record-field"><strong>Designation:</strong> ${member.fd}</div>
                            <div class="record-field"><strong>Qualification:</strong> ${member.fq}</div>
                            <div class="record-field"><strong>Contact:</strong> ${member.fcno}</div>
                            <div class="record-field"><strong>Email:</strong> ${member.feid}</div>
                            ${member.nsalary ? `<div class="record-field"><strong>Salary:</strong> ₹${member.nsalary}</div>` : ''}
                        </div>
                    </div>
                `;
            });

            html += '</div></div>';
            container.innerHTML = html;
        }

        function getModifyStaffForm() {
            return `
                <div class="form-container active">
                    <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                    <h2>Modify Staff Record</h2>
                    <div class="form-group" style="max-width: 400px;">
                        <label>Enter Staff ID:</label>
                        <input type="number" id="modifyFid" onchange="loadStaffForModify()">
                    </div>
                    <div id="modifyStaffForm"></div>
                </div>
            `;
        }

        function loadStaffForModify() {
            const fid = document.getElementById('modifyFid').value;
            const staffIndex = staff.findIndex(s => s.fid == fid);
            
            if (staffIndex !== -1) {
                const member = staff[staffIndex];
                document.getElementById('modifyStaffForm').innerHTML = `
                    <form onsubmit="updateStaff(event, ${staffIndex})" style="margin-top: 20px;">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Staff Name:</label>
                                <input type="text" name="fan" value="${member.fan}" required>
                            </div>
                            <div class="form-group">
                                <label>Qualification:</label>
                                <input type="text" name="fq" value="${member.fq}" required>
                            </div>
                            <div class="form-group">
                                <label>Contact No:</label>
                                <input type="tel" name="fcno" value="${member.fcno}" required>
                            </div>
                            <div class="form-group">
                                <label>Email:</label>
                                <input type="email" name="feid" value="${member.feid}" required>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">Update</button>
                        </div>
                    </form>
                `;
            } else {
                document.getElementById('modifyStaffForm').innerHTML = '<p style="color: #e74c3c;">Staff not found!</p>';
            }
        }

        function updateStaff(event, index) {
            event.preventDefault();
            const formData = new FormData(event.target);
            Object.entries(Object.fromEntries(formData)).forEach(([key, value]) => {
                staff[index][key] = value;
            });
            
            document.getElementById('formsContainer').innerHTML = `
                <div class="success-message">Staff Record Updated Successfully!</div>
            `;
            setTimeout(() => {
                document.getElementById('formsContainer').innerHTML = '';
            }, 2000);
        }

        function getDeleteStaffForm() {
            return `
                <div class="form-container active">
                    <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                    <h2>Delete Staff Record</h2>
                    <div class="form-group" style="max-width: 400px;">
                        <label>Enter Staff ID:</label>
                        <input type="number" id="deleteFid">
                    </div>
                    <button class="btn-primary" onclick="deleteStaff()" style="margin-top: 20px;">Delete Staff</button>
                    <div id="deleteStaffResult"></div>
                </div>
            `;
        }

        function deleteStaff() {
            const fid = document.getElementById('deleteFid').value;
            const index = staff.findIndex(s => s.fid == fid);
            
            if (index !== -1) {
                staff.splice(index, 1);
                document.getElementById('deleteStaffResult').innerHTML = '<div class="success-message" style="margin-top: 20px;">Staff Deleted Successfully!</div>';
            } else {
                document.getElementById('deleteStaffResult').innerHTML = '<p style="color: #e74c3c; margin-top: 20px;">Staff not found!</p>';
            }
        }

        function getSalaryForm() {
            return `
                <div class="form-container active">
                    <button class="back-btn" onclick="document.getElementById('formsContainer').innerHTML = ''">← Back</button>
                    <h2>Staff Salary Generation</h2>
                    <div class="form-group" style="max-width: 400px;">
                        <label>Enter Staff ID:</label>
                        <input type="number" id="salaryFid" onchange="loadSalaryCalculation()">
                    </div>
                    <div id="salaryCalculation"></div>
                </div>
            `;
        }

        function loadSalaryCalculation() {
            const fid = document.getElementById('salaryFid').value;
            const staffIndex = staff.findIndex(s => s.fid == fid);
            
            if (staffIndex !== -1) {
                const member = staff[staffIndex];
                const salaryStructure = {
                    'Principal': 50000,
                    'HOD': 40000,
                    'Professor': 30000,
                    'Lab Incharge': 25000,
                    'Support Staff': 20000
                };

                const basicSalary = salaryStructure[member.fd] || 20000;
                const hra = Math.round(basicSalary * 0.10);
                const da = Math.round(basicSalary * 0.08);
                const ta = Math.round(basicSalary * 0.05);
                const pf = Math.round(basicSalary * 0.06);
                const it = Math.round(basicSalary * 0.10);
                const totalAllowance = hra + da + ta;
                const totalDeduction = pf + it;
                const netSalary = basicSalary + totalAllowance - totalDeduction;

                staff[staffIndex].nsalary = netSalary;

                document.getElementById('salaryCalculation').innerHTML = `
                    <div style="margin-top: 20px; background: #f8f9fa; padding: 20px; border-radius: 10px;">
                        <h3 style="color: #667eea;">Staff: ${member.fan}</h3>
                        <p><strong>Staff ID:</strong> ${member.fid}</p>
                        <p><strong>Designation:</strong> ${member.fd}</p>
                        
                        <div style="margin: 20px 0;">
                            <h4 style="color: #2ecc71; margin-bottom: 10px;">Salary Breakdown</h4>
                            <p><strong>Basic Salary:</strong> ₹${basicSalary}</p>
                            <p><strong>HRA (10%):</strong> ₹${hra}</p>
                            <p><strong>DA (8%):</strong> ₹${da}</p>
                            <p><strong>TA (5%):</strong> ₹${ta}</p>
                            <p style="color: #2ecc71;"><strong>Total Allowance:</strong> ₹${totalAllowance}</p>
                            
                            <p style="margin-top: 15px;"><strong>PF (6%):</strong> ₹${pf}</p>
                            <p><strong>IT (10%):</strong> ₹${it}</p>
                            <p style="color: #e74c3c;"><strong>Total Deduction:</strong> ₹${totalDeduction}</p>
                            
                            <h3 style="color: #667eea; margin-top: 20px; padding-top: 15px; border-top: 2px solid #667eea;">Net Salary: ₹${netSalary}</h3>
                        </div>

                        <button class="btn-primary" onclick="saveSalary(${staffIndex})">Save Salary</button>
                    </div>
                `;
            } else {
                document.getElementById('salaryCalculation').innerHTML = '<p style="color: #e74c3c; margin-top: 20px;">Staff not found!</p>';
            }
        }

        function saveSalary(index) {
            document.getElementById('formsContainer').innerHTML = `
                <div class="success-message">Salary Generated Successfully! Net Salary: ₹${staff[index].nsalary}</div>
            `;
            setTimeout(() => {
                document.getElementById('formsContainer').innerHTML = '';
            }, 2000);
        }

        // ===========================
        // STAFF SALARY VIEW
        // ===========================

        function displayMySalary() {
            const staffMember = staff.find(s => s.fid == currentUser.staffId);
            const container = document.getElementById('mySalaryContent');
            
            if (!staffMember) {
                container.innerHTML = '<p style="color: #e74c3c;">Your record was not found. Please contact administrator.</p>';
                return;
            }

            const salaryStructure = {
                'Principal': 50000,
                'HOD': 40000,
                'Professor': 30000,
                'Lab Incharge': 25000,
                'Support Staff': 20000
            };

            const basicSalary = salaryStructure[staffMember.fd] || 20000;
            const hra = Math.round(basicSalary * 0.10);
            const da = Math.round(basicSalary * 0.08);
            const ta = Math.round(basicSalary * 0.05);
            const pf = Math.round(basicSalary * 0.06);
            const it = Math.round(basicSalary * 0.10);
            const totalAllowance = hra + da + ta;
            const totalDeduction = pf + it;
            const netSalary = basicSalary + totalAllowance - totalDeduction;

            container.innerHTML = `
                <div class="form-container active" style="display: block;">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 10px; margin-bottom: 25px;">
                        <h3 style="margin: 0 0 15px 0; font-size: 22px;">Personal Information</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px;">
                            <p style="margin: 5px 0;"><strong>Name:</strong> ${staffMember.fan}</p>
                            <p style="margin: 5px 0;"><strong>Staff ID:</strong> ${staffMember.fid}</p>
                            <p style="margin: 5px 0;"><strong>Designation:</strong> ${staffMember.fd}</p>
                            <p style="margin: 5px 0;"><strong>Qualification:</strong> ${staffMember.fq}</p>
                            <p style="margin: 5px 0;"><strong>Email:</strong> ${staffMember.feid}</p>
                            <p style="margin: 5px 0;"><strong>Contact:</strong> ${staffMember.fcno}</p>
                        </div>
                    </div>

                    <h3 style="color: #667eea; margin-bottom: 20px;">Salary Details</h3>
                    
                    <div style="background: white; padding: 20px; border: 2px solid #e0e0e0; border-radius: 10px; margin-bottom: 15px;">
                        <h4 style="color: #2ecc71; margin-bottom: 15px; font-size: 18px;">Basic Salary</h4>
                        <p style="font-size: 28px; font-weight: bold; color: #333; margin: 0;">₹${basicSalary.toLocaleString()}</p>
                    </div>

                    <div style="background: white; padding: 20px; border: 2px solid #e0e0e0; border-radius: 10px; margin-bottom: 15px;">
                        <h4 style="color: #2ecc71; margin-bottom: 15px; font-size: 18px;">Allowances</h4>
                        <div style="display: grid; gap: 10px;">
                            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                                <span>House Rent Allowance (HRA) - 10%</span>
                                <strong>₹${hra.toLocaleString()}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                                <span>Dearness Allowance (DA) - 8%</span>
                                <strong>₹${da.toLocaleString()}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                                <span>Travel Allowance (TA) - 5%</span>
                                <strong>₹${ta.toLocaleString()}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 12px; background: #e8f5e9; border-radius: 5px; margin-top: 5px;">
                                <span><strong>Total Allowances</strong></span>
                                <strong style="color: #2ecc71; font-size: 18px;">₹${totalAllowance.toLocaleString()}</strong>
                            </div>
                        </div>
                    </div>

                    <div style="background: white; padding: 20px; border: 2px solid #e0e0e0; border-radius: 10px; margin-bottom: 15px;">
                        <h4 style="color: #e74c3c; margin-bottom: 15px; font-size: 18px;">Deductions</h4>
                        <div style="display: grid; gap: 10px;">
                            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                                <span>Provident Fund (PF) - 6%</span>
                                <strong>₹${pf.toLocaleString()}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                                <span>Income Tax (IT) - 10%</span>
                                <strong>₹${it.toLocaleString()}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 12px; background: #ffebee; border-radius: 5px; margin-top: 5px;">
                                <span><strong>Total Deductions</strong></span>
                                <strong style="color: #e74c3c; font-size: 18px;">₹${totalDeduction.toLocaleString()}</strong>
                            </div>
                        </div>
                    </div>

                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 10px; text-align: center;">
                        <h3 style="margin: 0 0 10px 0; font-size: 20px;">Net Salary (Take Home)</h3>
                        <p style="font-size: 42px; font-weight: bold; margin: 0;">₹${netSalary.toLocaleString()}</p>
                        <p style="margin: 10px 0 0 0; opacity: 0.9; font-size: 16px;">Per Month</p>
                    </div>
                </div>
            `;
        }

        // ===========================
        // EVENT LISTENERS
        // ===========================

        document.addEventListener('DOMContentLoaded', function() {
            const passwordInput = document.getElementById('password');
            const usernameInput = document.getElementById('username');
            
            if (passwordInput) {
                passwordInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        login();
                    }
                });
            }

            if (usernameInput) {
                usernameInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        login();
                    }
                });
            }
        });
    </script>
</body>
</html>
